<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.platform.dao.FileMapper" >
  <resultMap id="BaseResultMap" type="com.platform.pojo.File" >
    <constructor >
      <arg column="id" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="name" jdbcType="VARCHAR" javaType="java.lang.String" />
      <arg column="category_id" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="upload_user_id" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="address" jdbcType="VARCHAR" javaType="java.lang.String" />
      <arg column="detail" jdbcType="VARCHAR" javaType="java.lang.String" />
      <arg column="score" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="times" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="status" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="create_time" jdbcType="TIMESTAMP" javaType="java.util.Date" />
      <arg column="update_time" jdbcType="TIMESTAMP" javaType="java.util.Date" />
    </constructor>
  </resultMap>
  <sql id="Base_Column_List">
    id, name, category_id, upload_user_id, address, detail, score, times, status, create_time, update_time
  </sql>
  <insert id="insert" parameterType="com.platform.pojo.File" >
    insert into s_p_file (id, name, category_id, 
      upload_user_id, address, detail, 
      score, times, status, 
      create_time, update_time)
    values (#{id,jdbcType=INTEGER}, #{name,jdbcType=VARCHAR}, #{categoryId,jdbcType=INTEGER}, 
      #{uploadUserId,jdbcType=INTEGER}, #{address,jdbcType=VARCHAR}, #{detail,jdbcType=VARCHAR}, 
      #{score,jdbcType=INTEGER}, #{times,jdbcType=INTEGER}, #{status,jdbcType=INTEGER}, 
      #{createTime,jdbcType=TIMESTAMP}, #{updateTime,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="com.platform.pojo.File" >
    insert into s_p_file
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="name != null" >
        name,
      </if>
      <if test="categoryId != null" >
        category_id,
      </if>
      <if test="uploadUserId != null" >
        upload_user_id,
      </if>
      <if test="address != null" >
        address,
      </if>
      <if test="detail != null" >
        detail,
      </if>
      <if test="score != null" >
        score,
      </if>
      <if test="times != null" >
        times,
      </if>
      <if test="status != null" >
        status,
      </if>
      <if test="createTime != null" >
        create_time,
      </if>
      <if test="updateTime != null" >
        update_time,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="name != null" >
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="categoryId != null" >
        #{categoryId,jdbcType=INTEGER},
      </if>
      <if test="uploadUserId != null" >
        #{uploadUserId,jdbcType=INTEGER},
      </if>
      <if test="address != null" >
        #{address,jdbcType=VARCHAR},
      </if>
      <if test="detail != null" >
        #{detail,jdbcType=VARCHAR},
      </if>
      <if test="score != null" >
        #{score,jdbcType=INTEGER},
      </if>
      <if test="times != null" >
        #{times,jdbcType=INTEGER},
      </if>
      <if test="status != null" >
        #{status,jdbcType=INTEGER},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null" >
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.platform.pojo.User">
    update s_p_file
    <set>
      <if test="name != null" >
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="categoryId != null" >
        category_id = #{categoryId,jdbcType=INTEGER},
      </if>
      <if test="uploadUserId != null" >
        upload_user_id = #{uploadUserId,jdbcType=INTEGER},
      </if>
      <if test="address != null" >
        address = #{address,jdbcType=VARCHAR},
      </if>
      <if test="detail != null" >
        detail = #{detail,jdbcType=VARCHAR},
      </if>
      <if test="score != null" >
        score = #{score,jdbcType=INTEGER},
      </if>
      <if test="times != null" >
        times = #{times,jdbcType=INTEGER},
      </if>
      <if test="status != null" >
        status = #{status,jdbcType=INTEGER},
      </if>
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null" >
        update_time = now(),
      </if>
    </set>
    where id = #{id}
  </update>
  <select id="selectSearchByIdAndName" resultMap="BaseResultMap">
      select
      <include refid="Base_Column_List"/>
      from s_p_file
      <where>
        <if test="fileId != null">
          and id = #{fileId}
        </if>
        <if test="fileName != null">
          and name like #{fileName}
        </if>
      </where>
    </select>
  <select id="selectAllFile" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from s_p_file
  </select>
  <select id="selectFileByStatus" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from s_p_file
    where status = #{status}
  </select>
  <select id="selectFileOrderByTimesDesc" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from s_p_file
    order by times desc
  </select>
    <select id="getCount" resultType="java.lang.Integer">
      select count(1) from s_p_file
    </select>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap">
      select
      <include refid="Base_Column_List"/>
      from s_p_file
      where id = #{fileId}
    </select>
    <select id="selectByUploadUserId" resultMap="BaseResultMap">
      select
      <include refid="Base_Column_List"/>
      from s_p_file
      where upload_user_id = #{userId}
    </select>
    <select id="selectByNameAndCategoryIds" resultMap="BaseResultMap" parameterType="map">
      select
      <include refid="Base_Column_List"/>
      from s_p_file
      where status = 1
      <if test="keyword != null">
        and name like #{keyword}
      </if>
      <if test="categoryIdList != null">
        and category_id in
        <foreach item="item" index="index" open="(" separator="," close=")" collection="categoryIdList">
          #{item}
        </foreach>
      </if>
    </select>
</mapper>